<!DOCTYPE html>
<html>

<head>
  <!-- Styling -->
  <link rel='stylesheet' href='styles/main.css'>
  <link rel="stylesheet" href="styles/task.css">

  <!-- Scripts -->
  <script src='https://d3js.org/d3.v5.min.js'></script>
  <script src="https://d3js.org/d3-array.v2.min.js"></script>
  <script src="https://d3js.org/d3-geo.v1.min.js"></script>
  <!-- <script src="scripts/libs/d3-lasso.min.js"></script> -->
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/topojson-client@3"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- For Tasks -->
  <script src="src/userstudy/task_data.js"></script>
  <script src="src/userstudy/task_form.js"></script>

  <title>ElasticFDA</title>
</head>

<body>
  <div class="content container-fluid">

    <p class="h5">Use the visualization to answer the question</p>
    
    <!-- Task Area -->
    <form id="taskForm">
        <div class="mb-4 px-4 py-3" id="taskDiv" onsubmit="return validateForm();">
            <p class="task-question"></p>
            <div id="answerDiv"></div>
        </div>

    <!-- Finish Button -->
        <input type="button" id="submit" onclick="return nextTask();" class="btn btn-primary" value="Next Task">
        <p id="validateMsg"></p></form>
    </form>

  </div>

  <!--- Visualization -->
    <div class='wrapper_main'>
      <div class='wrapper_left'>
        <div id="ts_view">
          <div class='view_title'>Time Series View</div>
          <div class="config">
            Dataset:
          <!-- Data select -->
            <select id="data_selection" onchange="update()"> 
              <option value="hpc_oda_col_system.csv">hpc_oda_col_system.csv</option>
                <option value="hpc_oda_col_idle.csv">hpc_oda_col_idle.csv</option>
                <option value="hpc_oda_cpu_cycles.csv">hpc_oda_cpu_cycles.csv</option>
                <option value="hpc_oda_cache_misses.csv">hpc_oda_cache_misses.csv</option>
                <option value="accel_phone_A_x.csv">accel_phone_A_x.csv</option>
                <option value="gyro_phone_A_x.csv">gyro_phone_A_x.csv</option>
                <option value="gyro_phone_B_x.csv" selected>gyro_phone_B_x.csv</option>
              </select>
            </div>
            <!-- Config -->
            <div id="depth-config">
              <form type="submit" id="depth-params">
                Parameters: IQR Multiplier<input type="number" class="num-input" id="k-input" value="1.5" step="0.1">
                Threshold<input type="number" class="num-input" id="threshold-input" value="0.5" step="0.1"><br>
                <input class="compute-btn" type="submit" value="Compute"></input>
              </form>
            </div>
            <!-- View select-->
            <!-- <div id="button-container">
              <button id="btn1" class="toggle-btn" value="0">Normal View</button>
              <button id="btn2" class="toggle-btn active" value="1">Outlier View</button>
            </div> -->
            <!-- Error message -->
            <div id="error-message"></div>
            <!-- Time series svg -->
            <div id='ts-container'>
              <svg id='line-svg'></svg>
            </div>
        </div>
      </div>
          <div class="wrapper_right">
            <div id="ds_view">
              <div class="view_title">Depth Space</div>
                <svg id="graph-svg" width="100%" height="100%"></svg>
              </div>
          </div>
      </div>
      <div class="wrapper_bottom">
        <div id="fs_view">
          <div class='view_title'>Functions View</div>
            <svg id="ts_legend" width="100%" height="50px"></svg>  
            <div id="fs-list"></div>
          </div>
        </div>
    </div>

  <script src='main.js' type='module'></script>
</body>

</html>